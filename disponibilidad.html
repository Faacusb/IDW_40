<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Disponibilidad de Turnos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="CSS/estilos.css">
</head>
<body style="background-color: #f5f9ff;">
    <header class="bg-primary text-white text-center py-3">
    <h1>Gestión de Disponibilidad de Turnos</h1>
    </header>

    <main class="container my-4">
    <section class="bg-white p-4 rounded shadow-sm">
        <h2 class="text-center text-primary mb-4">Agregar Disponibilidad</h2>

        <!-- Formulario para agregar disponibilidad -->
        <form id="formDisponibilidad" class="row g-3 justify-content-center">
        <div class="col-md-4">
            <label for="medico" class="form-label fw-semibold">Médico</label>
            <input type="text" id="medico" class="form-control" placeholder="Nombre del médico" required>
        </div>
        <div class="col-md-3">
            <label for="fecha" class="form-label fw-semibold">Fecha</label>
            <input type="date" id="fecha" class="form-control" required>
        </div>
        <div class="col-md-3">
            <label for="hora" class="form-label fw-semibold">Hora</label>
            <input type="time" id="hora" class="form-control" required>
        </div>
        <div class="col-md-2 d-flex align-items-end">
            <button type="submit" class="btn btn-success w-100">Agregar</button>
        </div>
        </form>

        <hr class="my-4">

        <!-- la tabla de disponibilidad -->
        <h3 class="text-center text-primary mb-3">Lista de Disponibilidades</h3>
        <div class="table-responsive">
        <table class="table table-striped text-center align-middle">
            <thead class="table-primary">
            <tr>
                <th>Médico</th>
                <th>Fecha</th>
                <th>Hora</th>
                <th>Acciones</th>
            </tr>
            </thead>
            <tbody id="tablaDisponibilidad">
            <!-- estas son las filas se cargan con JavaScript -->
            </tbody>
        </table>
        </div>
    </section>
    </main>

    <footer class="bg-primary text-white text-center py-3 mt-5">
    <p class="mb-0">&copy; 2025 Centro Médico Medical Assistance</p>
    </footer>

    <script>
    // --- esta es la simulación básica con localStorage ---
    const form = document.getElementById('formDisponibilidad');
    const tabla = document.getElementById('tablaDisponibilidad');

    function obtenerDisponibilidades() {
        return JSON.parse(localStorage.getItem('disponibilidades')) || [];
    }

    function guardarDisponibilidades(data) {
        localStorage.setItem('disponibilidades', JSON.stringify(data));
    }

    function renderizarTabla() {
        const datos = obtenerDisponibilidades();
        tabla.innerHTML = '';

        if (datos.length === 0) {
        tabla.innerHTML = '<tr><td colspan="4">No hay disponibilidades registradas.</td></tr>';
        return;
        }

        datos.forEach((disp, i) => {
        const fila = document.createElement('tr');
        fila.innerHTML = `
            <td>${disp.medico}</td>
            <td>${disp.fecha}</td>
            <td>${disp.hora}</td>
            <td><button class="btn btn-danger btn-sm" onclick="eliminarDisponibilidad(${i})">Eliminar</button></td>
        `;
        tabla.appendChild(fila);
        });
    }

    form.addEventListener('submit', e => {
        e.preventDefault();
        const nuevaDisp = {
        medico: document.getElementById('medico').value.trim(),
        fecha: document.getElementById('fecha').value,
        hora: document.getElementById('hora').value,
        };

        if (!nuevaDisp.medico || !nuevaDisp.fecha || !nuevaDisp.hora) {
        alert('Por favor, complete todos los campos.');
        return;
        }

        const lista = obtenerDisponibilidades();
        lista.push(nuevaDisp);
        guardarDisponibilidades(lista);
        form.reset();
        renderizarTabla();
    });

    function eliminarDisponibilidad(index) {
        const lista = obtenerDisponibilidades();
        lista.splice(index, 1);
        guardarDisponibilidades(lista);
        renderizarTabla();
    }

    document.addEventListener('DOMContentLoaded', renderizarTabla);
    </script>
</body>
</html>

